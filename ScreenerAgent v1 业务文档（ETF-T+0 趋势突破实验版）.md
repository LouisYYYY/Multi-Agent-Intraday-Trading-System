# ScreenerAgent v1 业务文档（ETF-T+0 趋势突破实验版）

## 1. 文档目的

用于明确本项目第一阶段的业务范围、目标、策略方向与模块边界，作为后续开发、调参与复盘的统一依据。

---

## 2. 项目背景（当前阶段）

本项目是一个运行在 **NAS（Docker）环境**中的 **多-Agent 日内交易系统**。  
目标是把实时/准实时市场数据转化为 **可执行、可分级、可审计** 的交易信号。

### 当前阶段定位（MVP）

- 先做 **ScreenerAgent（选标的 Agent）**

- 先输出 **候选标的与理由**（不做自动下单）

- 为后续 `FactorAgent / DecisionAgent / RiskAgent` 预留标准接口

---

## 3. 本阶段核心决策（已确认）

### 3.1 市场范围

- **A股相关市场**

- 当前实验优先使用 **可实现真·T+0 的 ETF 品种**

### 3.2 首批标的类型（已确定）

- **黄金ETF**

- **跨境ETF**

> 说明：选择这两类是为了兼顾  
> 1）真·T+0实验需求  
> 2）趋势突破策略所需的波动与交易机会  
> 3）新手实验阶段的可解释性与可复盘性

### 3.3 策略方向（已确定）

- **主策略：趋势突破（Trend Breakout）**

- **暂不启用：震荡回归（Mean Reversion）**

> 原因：趋势突破更适合当前“快速上线、快速出成果”的目标，且更容易解释、审计和调参。

### 3.4 执行方式（当前 vs 未来）

- **当前：仅输出信号与日志，不自动下单**

- **未来：保留自动下单扩展能力**

---

## 4. 为什么先做趋势突破（业务理由）

相比震荡回归，趋势突破在当前阶段更适合本项目：

- **更容易解释**：入池理由清晰（强势、放量、接近突破位、VWAP配合）

- **更容易审计**：规则明确，日志字段清楚

- **更容易上线**：参数更少、结构更直观

- **更适合新手实验**：复盘时更容易看懂“为什么入池/为什么失败”

### 不冲突说明

- **T+0** 是交易机制（当天可买可卖）

- **趋势突破** 是交易策略（何时买卖）

两者不冲突，且 T+0 有利于趋势突破策略做失败处理与快速实验。

---

## 5. ScreenerAgent v1 的业务目标

在每个决策周期内，从黄金ETF / 跨境ETF 标的池中筛选出 **8–12 个趋势突破候选标的**，并输出：

- 候选标的列表（Shortlist）

- 候选评分（ScreenerScore）

- 候选观察等级（WATCH_LOW / MID / HIGH）

- 入池理由（Rationale）

- 风险标签（Risk Tags）

- 数据质量状态（Data Quality）

- 配置版本（Config Version）

> 注意：本 Agent 输出的是“值得盯”的候选，不是最终 BUY/SELL 信号。

---

## 6. ScreenerAgent 的职责边界

## 6.1 本 Agent 负责

- 管理 ETF 候选池（黄金ETF、跨境ETF）

- 基于规则做硬过滤（可交易性、异常、数据质量）

- 判断市场状态（Regime）

- 对候选标的进行趋势突破相关评分

- 输出标准化候选结果与日志

## 6.2 本 Agent 不负责

- 最终交易触发（BUY/SELL/WAIT）

- 仓位分配、止损止盈

- 硬风控审批、熔断

- 自动下单执行

---

## 7. 本阶段资产范围与实验范围

### 7.1 纳入范围（In Scope）

- 黄金ETF

- 跨境ETF

- 分钟级行情（1m/5m）

- 趋势突破候选筛选

- 候选评分与日志落盘

### 7.2 暂不纳入（Out of Scope）

- A股个股 T+1 场景下的完整交易执行逻辑

- 震荡回归策略

- L2盘口与逐笔成交（后续增强）

- 自动下单执行

- 自动调参

---

## 8. 业务流程（ScreenerAgent v1）

### Step 1：基础标的池（Static Universe）

- 建立固定 ETF 标的池（黄金ETF + 跨境ETF）

- 第一版规模控制在 **10–30 个**

### Step 2：硬过滤（Hard Filters）

剔除不适合当前周期交易/观察的标的，主要包括：

- 流动性不足

- 波动过低或过高

- 数据延迟/缺失异常

- 行情异常或无效数据

- 特定时间窗口噪声（如开盘初期、临近收盘）

### Step 3：市场状态判断（Regime）

判断当前市场环境属于：

- `TREND_UP`

- `TREND_DOWN`

- `RANGE`

- `CHAOTIC`

用于控制候选阈值与筛选强度（避免震荡市假突破过多）。

### Step 4：趋势突破候选评分（ScreenerScore）

对通过过滤的标的进行综合评分，重点评估：

- 流动性与执行质量

- 相对强弱（同类ETF比较）

- 量价共振（放量 + 接近突破位）

- 趋势结构质量

- VWAP一致性

- 波动质量

- 风险/噪声惩罚项

### Step 5：输出候选结果

输出 `trend_breakout_candidates` 候选列表，并包含：

- 排名

- 评分

- 观察等级

- 入池理由

- 风险标签

- 数据质量摘要

---

## 9. 候选评分口径（业务层）

### 9.1 候选评分（ScreenerScore）

用于表示标的“当前是否值得进入趋势突破观察池”，不是交易信号强弱。

### 9.2 候选观察等级（建议）

- `WATCH_LOW`

- `WATCH_MID`

- `WATCH_HIGH`

> 最终交易等级（BUY/SELL 的 LOW/MID/STRONG）由后续 `DecisionAgent` 负责生成。

---

## 10. 首批标的池选择原则（非代码）

### 10.1 黄金ETF

优先选择：

- 成交活跃

- 日内波动有一定空间

- 价格连续性较好（分时不“断”）

### 10.2 跨境ETF

优先选择：

- 宽基类、流动性较好

- 成交活跃稳定

- 日内走势相对连续，适合突破观察

避免：

- 过窄主题、流动性差、情绪波动过强的品种（第一阶段先不碰）

---

## 11. 数据源策略（当前建议）

### 11.1 当前目标

以 **低成本、快速上线** 为优先，满足 ScreenerAgent MVP 的分钟级筛选需求。

### 11.2 建议方案（MVP）

- **主数据源：pytdx**（实时/分钟行情获取）

- **辅数据源：AKShare**（指数/板块/补数/快速开发）

- **可选补充：Tushare Pro**（静态数据/校验，不作为主实时源）

> 说明：当前预算约 100 元/年，适合先做 MVP，不追求商用级低延迟数据链路。

---

## 12. 输出产物（本阶段）

每个决策周期输出一份标准化结果（JSON + 日志），至少包含：

- 时间戳

- Regime 判断结果

- 标的池统计（输入数、过滤后数量、短名单数量）

- 趋势突破候选列表

- 候选评分与观察等级

- 入池理由（Rationale）

- 风险标签（Risk Tags）

- 数据质量状态

- 配置版本号

---

## 13. 成功标准（本阶段）

本阶段不以“盈利”作为唯一验收标准，优先验收以下能力：

1. **链路打通**
   
   - 能稳定按周期运行并输出候选结果

2. **结果可解释**
   
   - 每个候选都有清晰入池理由

3. **结果可复盘**
   
   - 日志完整，能回看某时刻为何入池/未入池

4. **可调参**
   
   - 策略阈值与权重集中在配置文件中，便于快速迭代

5. **便于扩展**
   
   - 后续可接 `FactorAgent / DecisionAgent / RiskAgent`
   
   - 后续可扩展震荡回归与自动下单模块

---

## 14. 下一阶段计划（开发前瞻）

### Phase 1（当前）

- 完成 ScreenerAgent v1（黄金ETF + 跨境ETF + 趋势突破候选）

### Phase 2（增强）

- 加强 Regime 判断

- 优化 VWAP/量价共振与噪声惩罚

- 强化数据质量监控与告警

### Phase 3（联调）

- 对接 DecisionAgent（生成 BUY/SELL/WAIT + LOW/MID/STRONG）

- 对接 RiskAgent（风控门控）

- 为未来自动下单预留接口（暂不启用）

---

## 15. 当前版本一句话总结

**ScreenerAgent v1 是一个运行在 NAS（Docker）中的 ETF（日内 T+0）趋势突破候选筛选模块，当前聚焦黄金ETF与跨境ETF，目标是以低成本、可审计、可迭代的方式快速产出高质量候选池，为后续决策与风控模块提供稳定输入。**



# 第二节：选标策略（Screener Strategy）——ETF T+0 趋势突破版（v1）

### 2.1 策略定位

本策略用于 `ScreenerAgent`，面向 **黄金ETF / 跨境ETF** 的日内 **T+0** 实验场景，目标是在每个决策周期筛出“值得观察的趋势突破候选标的”。

> 说明：本策略输出的是 **候选池（WATCH）**，不是最终买卖信号（BUY/SELL 由后续 DecisionAgent 负责）。

---

### 2.2 策略目标（当前阶段）

在每个决策周期内，从黄金ETF / 跨境ETF 中筛选出 **8–12 个** 高质量候选标的，并输出：

- 候选排名（Rank）

- 候选评分（ScreenerScore）

- 观察等级（WATCH_LOW / MID / HIGH）

- 入池理由（Rationale）

- 风险标签（Risk Tags）

- 数据质量状态（Data Quality）

---

### 2.3 已确认策略方向

#### 主策略（启用）

- **趋势突破（Trend Breakout）**

#### 暂不启用（后续扩展）

- **震荡回归（Mean Reversion）**

**选择原因（简要）：**

- 趋势突破更适合当前“快速上线、快速出成果”的实验目标

- 规则更直观，便于解释、审计、复盘和调参

- 与 T+0 不冲突，且更利于失败后快速处理

---

### 2.4 适用标的范围（v1）

#### 纳入

- 黄金ETF

- 跨境ETF（优先宽基、流动性较好的品种）

#### 暂不作为主战场

- 债券ETF（可T+0，但通常波动较小，不适合作为趋势突破第一阶段主策略）

---

### 2.5 策略核心思想（业务口径）

本策略采用“**强者优先、放量确认、结构健康、状态过滤、噪声惩罚**”的组合筛选逻辑，核心原则如下：

1. **先看可交易性，再看方向**
   
   - 流动性不足、数据异常、结构混乱的标的先剔除

2. **先判断市场状态，再做突破候选筛选**
   
   - 趋势市正常筛选
   
   - 震荡/混乱市提高阈值或缩小候选池

3. **优先筛选同类中的强者**
   
   - 黄金ETF 内部比较
   
   - 跨境ETF 内部比较

4. **突破必须有量价共振，不看裸突破**
   
   - 放量 + 接近关键位 + VWAP配合

5. **候选≠买点，确认后再升级**
   
   - ScreenerAgent 输出 WATCH
   
   - DecisionAgent 再生成 BUY/SELL/WAIT

---

### 2.6 策略流程（v1）

#### Step 1：基础标的池（Static Universe）

建立固定 ETF 标的池：

- 黄金ETF（约 3–5 个）

- 跨境ETF（约 6–10 个）

> 第一版总池规模建议：10–15 个（可扩展到 30）

---

#### Step 2：硬过滤（Hard Filters）

剔除当前周期不适合交易/观察的标的，主要包括：

- 流动性不足（成交额不达标）

- 波动过低（无突破价值）

- 波动过高（易乱跳、假突破）

- 数据延迟/缺失异常

- 开盘噪声窗口（如开盘前若干分钟）

- 临近收盘的新候选（降级或减少入池）

---

#### Step 3：市场状态过滤（Regime Filter）

判断市场状态（Regime）并用于控制候选阈值：

- `TREND_UP`

- `TREND_DOWN`

- `RANGE`

- `CHAOTIC`

**作用：**

- 趋势市：正常启用趋势突破筛选

- 震荡市：提高入池阈值，减少假突破

- 混乱市：大幅缩池或允许低候选输出

---

#### Step 4：候选评分（ScreenerScore）

对通过过滤的标的进行综合评分，重点评估：

- 流动性与执行质量

- 相对强弱（同类ETF比较）

- 量价共振（放量 + 接近突破位）

- 趋势结构质量

- VWAP 一致性

- 波动质量

- 惩罚项（噪声、数据质量、尾盘等）

---

#### Step 5：分层输出（WATCH）

按评分输出候选观察等级（非交易等级）：

- `WATCH_HIGH`

- `WATCH_MID`

- `WATCH_LOW`

未达到阈值的标的不入候选池。

---

### 2.7 候选评分框架（v1）

#### 推荐评分公式（MVP）

ScreenerScore =  
`0.25*流动性 + 0.20*相对强弱 + 0.20*量价共振 + 0.15*趋势结构 + 0.10*VWAP一致性 + 0.10*波动质量 - 惩罚项`

#### 权重设计原则（简要）

- **流动性权重高**：为未来自动下单预留可执行性

- **相对强弱 + 量价共振**：趋势突破主引擎

- **趋势结构 / VWAP / 波动质量**：提高突破质量，减少假信号

- **惩罚项**：控制噪声与异常数据带来的误判

---

### 2.8 候选等级口径（v1）

> 注意：这是 **候选观察等级**，不是最终交易等级。

建议阈值（MVP）：

- `WATCH_HIGH`：ScreenerScore ≥ 80

- `WATCH_MID`：65 ≤ Score < 80

- `WATCH_LOW`：50 ≤ Score < 65

- `< 50`：不入池

---

### 2.9 本策略的有效性假设（需后续验证）

本策略的有效性建立在以下假设上：

1. 黄金ETF / 跨境ETF 中存在可持续的日内趋势段

2. “同类相对强弱 + 放量 + 结构健康”能提升突破候选质量

3. Regime 过滤可显著降低震荡市假突破数量

4. 数据质量可控（延迟/缺失异常能被识别并惩罚）

> 说明：本阶段不承诺“固定高胜率”，需通过回放/回测/日志复盘持续验证与调参。

---

### 2.10 策略边界（避免误用）

本策略 **不负责**：

- 最终买卖触发（BUY/SELL/WAIT）

- 仓位控制、止损止盈

- 硬风控审批

- 自动下单执行

本策略 **仅负责**：

- 在当前周期产出高质量“趋势突破观察候选池”

---

### 2.11 本节一句话总结

**本策略是一个面向黄金ETF与跨境ETF（日内T+0场景）的趋势突破候选筛选策略，核心通过“流动性过滤 + 市场状态过滤 + 同类相对强弱 + 量价共振 + 结构质量 + 噪声惩罚”生成可解释、可审计、可迭代的候选池输出。**



# 
